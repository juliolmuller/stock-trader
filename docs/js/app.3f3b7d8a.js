(function(t){function e(e){for(var s,o,i=e[0],c=e[1],l=e[2],d=0,p=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&p.push(n[o][0]),n[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],s=!0,i=1;i<a.length;i++){var c=a[i];0!==n[c]&&(s=!1)}s&&(r.splice(e--,1),t=o(o.s=a[0]))}return t}var s={},n={app:0},r=[];function o(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(a,s,function(e){return t[e]}.bind(null,s));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var s=a("8a23"),n=a.n(s);n.a},"32b3":function(t,e,a){},4045:function(t,e,a){t.exports=a.p+"img/loading.07e75c2f.svg"},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("app-header"),a("v-content",[a("v-container",[a("transition",{attrs:{name:"slide",mode:"out-in",appear:""}},[a("router-view")],1)],1)],1),a("app-footer")],1)},r=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app-bar",{attrs:{app:""}},[a("v-toolbar-title",[a("router-link",{staticClass:"v-toolbar__title",attrs:{to:"/"}},[a("span",[t._v("Stock")]),a("span",[t._v("Trader")])])],1),a("v-toolbar-items",t._l(t.navigation,(function(e){return a("v-btn",{key:e.name,attrs:{text:"",to:{name:e.name},exact:""}},[t._v(t._s(e.label))])})),1),a("v-spacer"),a("v-toolbar-items",[a("v-layout",{attrs:{"align-center":""}},[a("span",{staticClass:"subtitle-2 text--grey text--darken-2"},[t._v(" Fundos para investir: ")]),a("span",{staticClass:"subtitle-1 text--grey font-weight-bold ml-3 mr-5"},[t._v(" R$ "+t._s(t._f("number")(t.$store.getters["portfolio/unappliedFunds"],2))+" ")])]),a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({attrs:{text:""}},s),[a("span",[t._v("Salvar Transações")]),a("v-icon",[t._v("mdi-menu-down")])],1)]}}])},[a("v-list",[a("v-list-item",[a("v-list-item-title",{on:{click:t.commitChanges}},[a("v-icon",[t._v("mdi-content-save")]),t._v(" Salvar ")],1)],1),a("v-list-item",[a("v-list-item-title",{on:{click:t.discardChanges}},[a("v-icon",[t._v("mdi-undo-variant")]),t._v(" Descartar ")],1)],1)],1)],1)],1)],1)},i=[],c=a("5530"),l=a("2f62"),u={data:function(){return{navigation:[{name:"home",label:"Home"},{name:"portfolio",label:"Portfólio"},{name:"stocks",label:"Ações"}]}},methods:Object(c["a"])({},Object(l["d"])("storage",["commitChanges"]),{},Object(l["b"])("storage",["discardChanges"]))},d=u,p=(a("82a8"),a("2877")),f=a("6544"),v=a.n(f),m=a("40dc"),h=a("8336"),b=a("132d"),g=a("a722"),k=a("8860"),y=a("da13"),_=a("5d23"),C=a("e449"),x=a("2fa4"),S=a("2a7f"),V=Object(p["a"])(d,o,i,!1,null,"5809a063",null),j=V.exports;v()(V,{VAppBar:m["a"],VBtn:h["a"],VIcon:b["a"],VLayout:g["a"],VList:k["a"],VListItem:y["a"],VListItemTitle:_["a"],VMenu:C["a"],VSpacer:x["a"],VToolbarItems:S["a"],VToolbarTitle:S["b"]});var O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app-bar",{staticClass:"d-flex justify-center align-center",attrs:{app:"",bottom:""}},[a("span",{staticClass:"caption"},[t._v(" Todos os direitos reservados © 2020 "),a("span",{staticClass:"font-weight-black"},[t._v("LacusSoft")])]),t._l(t.icons,(function(e){return a("v-tooltip",{key:e.name,attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(s){var n=s.on;return[a("v-btn",t._g({staticClass:"mr-8",attrs:{icon:"",href:e.href}},n),[a("v-icon",[t._v(t._s(e.name))])],1)]}}],null,!0)},[a("span",[t._v(t._s(e.tooltip))])])}))],2)},w=[],q={data:function(){return{icons:[{href:"https://github.com/juliolmuller/stock-trader",tooltip:"Veja no GitHub",name:"mdi-github"}]}}},F=q,$=a("3a2f"),I=Object(p["a"])(F,O,w,!1,null,"29a11b10",null),A=I.exports;v()(I,{VAppBar:m["a"],VBtn:h["a"],VIcon:b["a"],VTooltip:$["a"]});var T={components:{AppHeader:j,AppFooter:A},beforeCreate:function(){this.$store.dispatch("storage/restoreData"),this.$store.dispatch("stocks/fetchStocks"),setInterval(this.$store.dispatch,3e5,"stocks/fetchStocks")}},N=T,E=(a("034f"),a("7496")),D=a("a523"),L=a("a75b"),P=Object(p["a"])(N,n,r,!1,null,null,null),B=P.exports;v()(P,{VApp:E["a"],VContainer:D["a"],VContent:L["a"]});var R=a("8c4f"),M=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h1",{staticClass:"display-2 text-center font-weight-bold mt-8 mb-6"},[t._v(" Brinque de Negociar Ações em Tempo Real ")]),s("alert-unsaved-changes"),s("alert-market-is-closed"),s("v-layout",{staticClass:"mt-12",attrs:{row:"",wrap:""}},[t.$store.state.appLoading?s("v-img",{staticClass:"mx-auto",attrs:{src:a("4045"),"açt":"Carregando","max-width":"10%"}}):t._l(t.cards,(function(t){return s("dashboard-card",{key:t.title,attrs:{info:t}})}))],2)],1)},Q=[],J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-alert",{staticClass:"subtitle-1",attrs:{color:"info",dark:"",icon:"mdi-information-outline",transition:"scale-transition",value:!1}},[t._v(" As negociações na Volsa de Valores estão fechadas. Nenhuma alteração poderá ser salva neste período. ")])},U=[],H={computed:Object(l["c"])("storage",["hasChanges"])},G=H,z=a("0798"),K=Object(p["a"])(G,J,U,!1,null,null,null),W=K.exports;v()(K,{VAlert:z["a"]});var X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-alert",{staticClass:"subtitle-1",attrs:{color:"warning",dark:"",icon:"mdi-alert-decagram-outline",transition:"scale-transition",value:t.hasChanges}},[t._v(" Você tem alterações não salvas na sua carteira de ações. Se você fechar o navegador ou esta aba de navegação, todas as alterações serão perdidas. ")])},Y=[],Z={computed:Object(l["c"])("storage",["hasChanges"])},tt=Z,et=Object(p["a"])(tt,X,Y,!1,null,null,null),at=et.exports;v()(et,{VAlert:z["a"]});var st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-card",{staticClass:"text-center mx-4",attrs:{height:"100%"}},[a("v-card-text",{staticClass:"text--primary"},[a("span",{staticClass:"headline"},[t._v(t._s(t.info.title))]),a("div",{staticClass:"d-flex justify-center align-center mt-4"},[a("span",{staticClass:"headline"},[t._v("R$")]),a("span",{staticClass:"display-3"},[t._v(t._s(t._f("number")(t.info.value,2)))])])]),t.info.route?a("v-card-actions",{staticClass:"pb-4"},[a("v-btn",{attrs:{color:"primary",text:"","x-large":"",block:"",to:t.info.route}},[a("span",{staticClass:"text-uppercase"},[t._v(t._s(t.info.route.label))])])],1):t._e()],1)],1)},nt=[],rt={props:{info:{type:Object,required:!0}}},ot=rt,it=a("b0af"),ct=a("99d9"),lt=a("0e8f"),ut=Object(p["a"])(ot,st,nt,!1,null,"a1b68e4c",null),dt=ut.exports;v()(ut,{VBtn:h["a"],VCard:it["a"],VCardActions:ct["a"],VCardText:ct["b"],VFlex:lt["a"]});var pt={components:{AlertMarketIsClosed:W,AlertUnsavedChanges:at,DashboardCard:dt},computed:Object(c["a"])({},Object(l["c"])("portfolio",["appliedFunds","unappliedFunds","totalFunds"]),{cards:function(){return[{title:"Valor em ações",value:this.appliedFunds,route:{name:"portfolio",label:"Ir para carteira"}},{title:"Valor não investido",value:this.unappliedFunds,route:{name:"stocks",label:"Comprar ações"}},{title:"Fundos totais",value:this.totalFunds}]}})},ft=pt,vt=(a("ad60"),a("adda")),mt=Object(p["a"])(ft,M,Q,!1,null,"ae6075f2",null),ht=mt.exports;v()(mt,{VImg:vt["a"],VLayout:g["a"]});var bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",{staticClass:"display-1 font-weight-bold mt-8 mb-6"},[t._v(" Sua Carteira de Ações ")]),a("alert-unsaved-changes"),a("alert-market-is-closed"),t.portfolioStocks.length?a("v-layout",{attrs:{row:"",wrap:""}},t._l(t.portfolioStocks,(function(t){return a("PortfolioCard",{key:t.id,attrs:{stock:t}})})),1):a("span",{staticClass:"d-block text-center title font-weight-regular"},[t._v(" Você não possui nenhum ativo. "),a("router-link",{attrs:{to:{name:"stocks"}}},[a("a",[t._v("Comprar ações")])]),t._v(". ")],1)],1)},gt=[],kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-flex",{staticClass:"pr-5 pb-5",attrs:{xs12:"",md6:"",lg4:""}},[a("v-card",{staticClass:"blue darken-3 white--text"},[a("v-card-title",{staticClass:"d-flex justify-space-between"},[a("h2",{staticClass:"subtitle-1 order-2"},[t._v(t._s(t.stock.company))]),a("span",{staticClass:"subtitle-1 order-1"},[t._v(t._s(t.stock.id))]),a("span",{staticClass:"subtitle-1 order-3"},[t._v("R$"+t._s(t._f("number")(t.stock.price,2))+"/ação")])])],1),a("v-card",[a("v-container",{attrs:{"fill-height":""}},[a("v-text-field",{attrs:{type:"number",label:"Quantidade (max. "+t.stock.quantity+")",error:0!==t.quantity&&!t.canSell},model:{value:t.quantity,callback:function(e){t.quantity=t._n(e)},expression:"quantity"}}),a("v-btn",{staticClass:"blue darken-3 white--text",attrs:{disabled:!t.canSell},on:{click:t.sellStock}},[t._v("Vender")])],1)],1)],1)},yt=[],_t=(a("a9e3"),a("8ba4"),{data:function(){return{quantity:0}},computed:{canSell:function(){return this.quantity>0&&Number.isInteger(this.quantity)&&this.quantity<=this.stock.quantity}},props:{stock:{type:Object,required:!0}},methods:{sellStock:function(){var t={stockId:this.stock.id,stockPrice:this.stock.price,stockQuantity:this.quantity};this.$store.dispatch("sellStocks",t),this.quantity=0}}}),Ct=_t,xt=a("8654"),St=Object(p["a"])(Ct,kt,yt,!1,null,"41a97f12",null),Vt=St.exports;v()(St,{VBtn:h["a"],VCard:it["a"],VCardTitle:ct["c"],VContainer:D["a"],VFlex:lt["a"],VTextField:xt["a"]});var jt={components:{AlertMarketIsClosed:W,AlertUnsavedChanges:at,PortfolioCard:Vt},computed:Object(l["c"])("portfolio",["portfolioStocks"])},Ot=jt,wt=Object(p["a"])(Ot,bt,gt,!1,null,"66561a99",null),qt=wt.exports;v()(wt,{VLayout:g["a"]});var Ft=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"d-flex justify-space-between align-center-end mt-8"},[s("h1",{staticClass:"display-1 font-weight-bold"},[t._v(" Mercado de Ações ")]),s("v-spacer"),s("v-text-field",{staticStyle:{"max-width":"300px"},attrs:{"append-icon":"mdi-magnify",placeholder:"Procurar ativo...",filled:"",rounded:"",dense:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),s("alert-unsaved-changes"),s("alert-market-is-closed"),s("v-layout",{attrs:{row:"",wrap:""}},[t.$store.state.appLoading?s("v-img",{staticClass:"mx-auto",attrs:{src:a("4045"),"açt":"Carregando","max-width":"10%"}}):t._l(t.searchResult,(function(t){return s("StockCard",{key:t.id,attrs:{stock:t}})}))],2)],1)},$t=[],It=(a("4de4"),a("4d63"),a("ac1f"),a("25f0"),a("466d"),a("841c"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-flex",{staticClass:"pr-5 pb-5",attrs:{xs12:"",md6:"",lg4:""}},[a("v-card",{staticClass:"green darken-3 white--text"},[a("v-card-title",{staticClass:"d-flex justify-space-between"},[a("h3",{staticClass:"subtitle-1 order-2"},[t._v(t._s(t.stock.company))]),a("span",{staticClass:"subtitle-1 order-1"},[t._v(t._s(t.stock.id))]),a("span",{staticClass:"subtitle-1 order-3"},[t._v("R$"+t._s(t._f("number")(t.stock.price,2))+"/ação")])])],1),a("v-card",[a("v-container",{attrs:{"fill-height":""}},[a("v-text-field",{attrs:{type:"number",label:"Quantidade",error:0!==t.quantity&&!t.canBuy},model:{value:t.quantity,callback:function(e){t.quantity=t._n(e)},expression:"quantity"}}),a("v-btn",{staticClass:"green darken-3 white--text",attrs:{disabled:!t.canBuy},on:{click:t.buyStock}},[t._v("Comprar")])],1)],1)],1)}),At=[],Tt={data:function(){return{quantity:0}},computed:{availableFunds:function(){return this.$store.getters["portfolio/unappliedFunds"]},canBuy:function(){return this.quantity>0&&Number.isInteger(this.quantity)&&this.quantity*this.stock.price<=this.availableFunds}},props:{stock:{type:Object,required:!0}},methods:{buyStock:function(){var t={stockId:this.stock.id,stockPrice:this.stock.price,stockQuantity:this.quantity};this.$store.dispatch("buyStocks",t),this.quantity=0}}},Nt=Tt,Et=Object(p["a"])(Nt,It,At,!1,null,"68e6c5d9",null),Dt=Et.exports;v()(Et,{VBtn:h["a"],VCard:it["a"],VCardTitle:ct["c"],VContainer:D["a"],VFlex:lt["a"],VTextField:xt["a"]});var Lt={components:{AlertMarketIsClosed:W,AlertUnsavedChanges:at,StockCard:Dt},data:function(){return{search:""}},computed:Object(c["a"])({},Object(l["c"])("stocks",["stocks"]),{searchResult:function(){var t=this;return this.search?this.stocks.filter((function(e){return JSON.stringify(e).match(new RegExp(t.search,"i"))})):this.stocks}})},Pt=Lt,Bt=(a("6a8b"),Object(p["a"])(Pt,Ft,$t,!1,null,"106f7045",null)),Rt=Bt.exports;v()(Bt,{VImg:vt["a"],VLayout:g["a"],VSpacer:x["a"],VTextField:xt["a"]}),s["a"].use(R["a"]);var Mt=new R["a"]({mode:"hash",routes:[{path:"/",name:"home",component:ht},{path:"/portfolio",name:"portfolio",component:qt},{path:"/stocks",name:"stocks",component:Rt},{path:"*",redirect:"/"}]}),Qt=(a("99af"),a("4160"),a("d81d"),a("b64b"),a("159b"),a("2909")),Jt=(a("96cf"),a("1da1")),Ut=a("bc3a"),Ht=a.n(Ut),Gt="https://sheet.best/api/sheets/38ec96b3-7c75-4639-9d81-f138f44ba2f5",zt={namespaced:!0,state:{stocks:[]},getters:{stocks:function(t){return t.stocks}},mutations:{setStocks:function(t,e){t.stocks=e}},actions:{fetchStocks:function(t){return Object(Jt["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,e.next=3,Ht()(Gt,{transformResponse:[].concat(Object(Qt["a"])(Ht.a.defaults.transformResponse),[function(t){return t.map((function(t){return Object.keys(t).forEach((function(e){isNaN(t[e])||(t[e]=Number(t[e]))})),t}))}])});case 3:s=e.sent,a("setStocks",s.data),a("setLoading",!1,{root:!0});case 6:case"end":return e.stop()}}),e)})))()}}},Kt=(a("7db0"),a("c975"),a("13d5"),a("a434"),{namespaced:!0,state:{funds:0,portfolio:[]},getters:{portfolioStocks:function(t,e,a,s){return t.portfolio.map((function(t){var e=s["stocks/stocks"].find((function(e){return e.id===t.id}));return Object(c["a"])({},e,{quantity:t.quantity})}))},appliedFunds:function(t,e){return e.portfolioStocks.reduce((function(t,e){return t+e.price*e.quantity}),0)},unappliedFunds:function(t){return t.funds},totalFunds:function(t,e){return e.appliedFunds+e.unappliedFunds}},mutations:{setData:function(t,e){t.funds=e.funds,t.portfolio=e.portfolio},buyStocks:function(t,e){var a=t.portfolio.find((function(t){return t.id===e.stockId}));a?a.quantity+=e.stockQuantity:t.portfolio.push({id:e.stockId,quantity:e.stockQuantity}),t.funds-=e.stockQuantity*e.stockPrice},sellStocks:function(t,e){var a=t.portfolio.find((function(t){return t.id===e.stockId}));a.quantity>e.stockQuantity?a.quantity-=e.stockQuantity:t.portfolio.splice(t.portfolio.indexOf(a),1),t.funds+=e.stockQuantity*e.stockPrice}},actions:{resetData:function(t){var e=t.commit,a=t.state;e("setData",{funds:1e4,portfolio:[]}),e("storage/stageChanges",a,{root:!0}),e("storage/commitChanges",null,{root:!0})},buyStocks:{root:!0,handler:function(t,e){var a=t.commit,s=(t.dispatch,t.state);a("buyStocks",e),a("storage/stageChanges",s,{root:!0})}},sellStocks:{root:!0,handler:function(t,e){var a=t.commit,s=(t.dispatch,t.state);a("sellStocks",e),a("storage/stageChanges",s,{root:!0})}}}}),Wt="my_data",Xt={namespaced:!0,state:{persitant:{},temporary:{}},getters:{hasChanges:function(t){var e=JSON.stringify(t.persitant),a=JSON.stringify(t.temporary);return a!==e}},mutations:{setStorages:function(t,e){var a=e.local,s=e.session;s&&(t.temporary=s),a&&(t.persitant=a)},stageChanges:function(t,e){t.temporary=e,sessionStorage.setItem(Wt,JSON.stringify(e))},commitChanges:function(t){t.persitant=Object(c["a"])({},t.temporary),localStorage.setItem(Wt,sessionStorage.getItem(Wt))}},actions:{restoreData:function(t){var e=t.commit,a=t.dispatch,s=JSON.parse(localStorage.getItem(Wt)),n=JSON.parse(sessionStorage.getItem(Wt))||s;n?(e("portfolio/setData",n,{root:!0}),e("setStorages",{local:s,session:n})):a("portfolio/resetData",null,{root:!0})},discardChanges:function(t){var e=t.commit,a=t.state;if(confirm("Esse é um comando irreversível. Deseja continuar?")){var s=a.persitant;e("stageChanges",s),e("portfolio/setData",s,{root:!0})}}}};s["a"].use(l["a"]);var Yt=new l["a"].Store({state:{appLoading:!0},mutations:{setLoading:function(t,e){t.appLoading=Boolean(e)}},modules:{stocks:zt,portfolio:Kt,storage:Xt}}),Zt=a("f309");s["a"].use(Zt["a"]);var te=new Zt["a"]({});a("8975");s["a"].config.productionTip=!1,new s["a"]({router:Mt,store:Yt,vuetify:te,render:function(t){return t(B)}}).$mount("#app")},"5d89":function(t,e,a){},"6a8b":function(t,e,a){"use strict";var s=a("5d89"),n=a.n(s);n.a},7690:function(t,e,a){var s={"./index.js":"8975","./number.js":"f1f7"};function n(t){var e=r(t);return a(e)}function r(t){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}n.keys=function(){return Object.keys(s)},n.resolve=r,t.exports=n,n.id="7690"},"82a8":function(t,e,a){"use strict";var s=a("32b3"),n=a.n(s);n.a},8975:function(t,e,a){"use strict";a.r(e);a("4de4"),a("4160"),a("d3b7"),a("ac1f"),a("5319"),a("159b"),a("ddb0");var s=a("2b0e"),n=a("7690");n.keys().forEach((function(t){if("./index.js"!==t){var e=n(t).default,a=t.replace(/^\.\//,"").replace(/\.js$/,"");s["a"].filter(a,e)}}))},"8a23":function(t,e,a){},ad60:function(t,e,a){"use strict";var s=a("f4a3"),n=a.n(s);n.a},f1f7:function(t,e,a){"use strict";a.r(e),e["default"]=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return isNaN(t)?t:Intl.NumberFormat("pt-BR",{maximumFractionDigits:e,minimumFractionDigits:e}).format(t)}},f4a3:function(t,e,a){}});
//# sourceMappingURL=app.3f3b7d8a.js.map