(function(t){function e(e){for(var n,o,i=e[0],c=e[1],l=e[2],d=0,f=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&f.push(s[o][0]),s[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(f.length)f.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,i=1;i<a.length;i++){var c=a[i];0!==s[c]&&(n=!1)}n&&(r.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},s={app:0},r=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var n=a("8a23"),s=a.n(n);s.a},"38a9":function(t,e,a){"use strict";var n=a("f5fa"),s=a.n(n);s.a},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("app-header"),a("v-content",[a("v-container",[a("transition",{attrs:{name:"slide",mode:"out-in",appear:""}},[a("router-view")],1)],1)],1),a("app-footer")],1)},r=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app-bar",{attrs:{app:""}},[a("v-toolbar-title",[a("router-link",{staticClass:"v-toolbar__title",attrs:{to:"/"}},[a("span",[t._v("Stock")]),a("span",[t._v("Trader")])])],1),a("v-toolbar-items",t._l(t.navigation,(function(e){return a("v-btn",{key:e.name,attrs:{text:"",to:{name:e.name},exact:""}},[t._v(t._s(e.label))])})),1),a("v-spacer"),a("v-toolbar-items",[a("v-layout",{staticClass:"font-weight-bold",attrs:{"align-center":""}},[a("span",{staticClass:"subtitle-1 text--grey text--darken-2"},[t._v(" Fundos para investir: ")]),a("span",{staticClass:"title text--grey font-weight-bold ml-3 mr-5"},[t._v(" R$ "+t._s(t._f("number")(t.$store.getters["portfolio/unappliedFunds"],2))+" ")])]),a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({attrs:{text:""}},n),[a("span",[t._v("Salvar Transações")]),a("v-icon",[t._v("mdi-menu-down")])],1)]}}])},[a("v-list",[a("v-list-item",[a("v-list-item-title",{on:{click:t.commitChanges}},[a("v-icon",[t._v("mdi-content-save")]),t._v(" Salvar ")],1)],1),a("v-list-item",[a("v-list-item-title",{on:{click:t.discardChanges}},[a("v-icon",[t._v("mdi-undo-variant")]),t._v(" Descartar ")],1)],1)],1)],1)],1)],1)},i=[],c=a("5530"),l=a("2f62"),u={data:function(){return{navigation:[{name:"home",label:"Home"},{name:"portfolio",label:"Portfólio"},{name:"stocks",label:"Ações"}]}},methods:Object(c["a"])({},Object(l["d"])("storage",["commitChanges"]),{},Object(l["b"])("storage",["discardChanges"]))},d=u,f=(a("38a9"),a("2877")),p=a("6544"),v=a.n(p),m=a("40dc"),h=a("8336"),b=a("132d"),y=a("a722"),k=a("8860"),g=a("da13"),_=a("5d23"),C=a("e449"),x=a("2fa4"),S=a("2a7f"),O=Object(f["a"])(d,o,i,!1,null,"d2c1477a",null),j=O.exports;v()(O,{VAppBar:m["a"],VBtn:h["a"],VIcon:b["a"],VLayout:y["a"],VList:k["a"],VListItem:g["a"],VListItemTitle:_["a"],VMenu:C["a"],VSpacer:x["a"],VToolbarItems:S["a"],VToolbarTitle:S["b"]});var V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app-bar",{staticClass:"d-flex justify-center align-center",attrs:{app:"",bottom:""}},[a("span",{staticClass:"caption"},[t._v(" Todos os direitos reservados © 2020 "),a("span",{staticClass:"font-weight-black"},[t._v("LacusSoft")])]),t._l(t.icons,(function(e){return a("v-tooltip",{key:e.name,attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(n){var s=n.on;return[a("v-btn",t._g({staticClass:"mr-8",attrs:{icon:"",href:e.href}},s),[a("v-icon",[t._v(t._s(e.name))])],1)]}}],null,!0)},[a("span",[t._v(t._s(e.tooltip))])])}))],2)},w=[],q={data:function(){return{icons:[{href:"https://github.com/juliolmuller/stock-trader",tooltip:"Veja no GitHub",name:"mdi-github"}]}}},F=q,$=a("3a2f"),I=Object(f["a"])(F,V,w,!1,null,"29a11b10",null),A=I.exports;v()(I,{VAppBar:m["a"],VBtn:h["a"],VIcon:b["a"],VTooltip:$["a"]});var T={components:{AppHeader:j,AppFooter:A},beforeCreate:function(){this.$store.dispatch("stocks/fetchStocks"),this.$store.dispatch("storage/restoreData")}},N=T,E=(a("034f"),a("7496")),D=a("a523"),P=a("a75b"),B=Object(f["a"])(N,s,r,!1,null,null,null),Q=B.exports;v()(B,{VApp:E["a"],VContainer:D["a"],VContent:P["a"]});var L=a("8c4f"),M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",{staticClass:"display-3 font-weight-light mt-8 mb-6"},[t._v(" Brinque de Negociar Ações em Tempo Real ")]),a("alert-unsaved-changes"),a("alert-market-is-closed"),a("v-layout",{staticClass:"mt-12",attrs:{row:"",wrap:""}},t._l(t.cards,(function(t){return a("dashboard-card",{key:t.title,attrs:{info:t}})})),1)],1)},R=[],J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-alert",{staticClass:"headline",attrs:{color:"info",dark:"",icon:"mdi-information-outline",prominent:"",transition:"scale-transition",value:!1}},[t._v(" As negociações na Volsa de Valores estão fechadas. Nenhuma alteração poderá ser salva neste período. ")])},U=[],H={computed:Object(l["c"])("storage",["hasChanges"])},G=H,z=a("0798"),K=Object(f["a"])(G,J,U,!1,null,null,null),W=K.exports;v()(K,{VAlert:z["a"]});var X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-alert",{staticClass:"headline",attrs:{color:"warning",dark:"",icon:"mdi-alert-decagram-outline",prominent:"",transition:"scale-transition",value:t.hasChanges}},[t._v(" Você tem alterações não salvas na sua carteira de ações. Se você fechar o navegador ou esta aba de navegação, todas as alterações serão perdidas. ")])},Y=[],Z={computed:Object(l["c"])("storage",["hasChanges"])},tt=Z,et=Object(f["a"])(tt,X,Y,!1,null,null,null),at=et.exports;v()(et,{VAlert:z["a"]});var nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-card",{staticClass:"text-center mx-4",attrs:{height:"100%"}},[a("v-card-text",{staticClass:"text--primary"},[a("span",{staticClass:"display-1"},[t._v(t._s(t.info.title))]),a("div",{staticClass:"d-flex justify-center align-center mt-4"},[a("span",{staticClass:"headline"},[t._v("R$")]),a("span",{staticClass:"display-4"},[t._v(t._s(t._f("number")(t.info.value,2)))])])]),t.info.route?a("v-card-actions",{staticClass:"pb-4"},[a("v-btn",{attrs:{color:"primary",text:"","x-large":"",block:"",to:t.info.route}},[a("span",{staticClass:"text-upper"},[t._v(t._s(t.info.route.label))])])],1):t._e()],1)],1)},st=[],rt={props:{info:{type:Object,required:!0}}},ot=rt,it=a("b0af"),ct=a("99d9"),lt=a("0e8f"),ut=Object(f["a"])(ot,nt,st,!1,null,null,null),dt=ut.exports;v()(ut,{VBtn:h["a"],VCard:it["a"],VCardActions:ct["a"],VCardText:ct["b"],VFlex:lt["a"]});var ft={components:{AlertMarketIsClosed:W,AlertUnsavedChanges:at,DashboardCard:dt},computed:Object(c["a"])({},Object(l["c"])("portfolio",["appliedFunds","unappliedFunds","totalFunds"]),{cards:function(){return[{title:"Valor em ações",value:this.appliedFunds,route:{name:"portfolio",label:"Ir para carteira"}},{title:"Valor não investido",value:this.unappliedFunds,route:{name:"stocks",label:"Comprar ações"}},{title:"Fundos totais",value:this.totalFunds}]}})},pt=ft,vt=(a("b89b"),Object(f["a"])(pt,M,R,!1,null,"0fffcacc",null)),mt=vt.exports;v()(vt,{VLayout:y["a"]});var ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",{staticClass:"display-2 font-weight-bold mt-8 mb-6"},[t._v(" Sua Carteira de Ações ")]),a("alert-unsaved-changes"),a("alert-market-is-closed"),a("v-layout",{attrs:{row:"",wrap:""}},t._l(t.portfolioStocks,(function(t){return a("PortfolioCard",{key:t.id,attrs:{stock:t}})})),1)],1)},bt=[],yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-flex",{staticClass:"pr-5 pb-5",attrs:{xs12:"",md6:"",lg4:""}},[a("v-card",{staticClass:"blue darken-3 white--text"},[a("v-card-title",{staticClass:"d-flex justify-space-between"},[a("h3",{staticClass:"order-2"},[t._v(t._s(t.stock.company))]),a("span",{staticClass:"order-1"},[t._v(t._s(t.stock.id))]),a("span",{staticClass:"order-3"},[t._v("$"+t._s(t._f("number")(t.stock.price,2))+" por ação")])])],1),a("v-card",[a("v-container",{attrs:{"fill-height":""}},[a("v-text-field",{attrs:{type:"number",label:"Quantidade (max. "+t.stock.quantity+")",error:0!==t.quantity&&!t.canSell},model:{value:t.quantity,callback:function(e){t.quantity=t._n(e)},expression:"quantity"}}),a("v-btn",{staticClass:"blue darken-3 white--text",attrs:{disabled:!t.canSell},on:{click:t.sellStock}},[t._v("Vender")])],1)],1)],1)},kt=[],gt=(a("a9e3"),a("8ba4"),{data:function(){return{quantity:0}},computed:{canSell:function(){return this.quantity>0&&Number.isInteger(this.quantity)&&this.quantity<=this.stock.quantity}},props:{stock:{type:Object,required:!0}},methods:{sellStock:function(){var t={stockId:this.stock.id,stockPrice:this.stock.price,stockQuantity:this.quantity};this.$store.dispatch("sellStocks",t),this.quantity=0}}}),_t=gt,Ct=a("8654"),xt=Object(f["a"])(_t,yt,kt,!1,null,"05df5d86",null),St=xt.exports;v()(xt,{VBtn:h["a"],VCard:it["a"],VCardTitle:ct["c"],VContainer:D["a"],VFlex:lt["a"],VTextField:Ct["a"]});var Ot={components:{AlertMarketIsClosed:W,AlertUnsavedChanges:at,PortfolioCard:St},computed:Object(l["c"])("portfolio",["portfolioStocks"])},jt=Ot,Vt=Object(f["a"])(jt,ht,bt,!1,null,"7fa3a946",null),wt=Vt.exports;v()(Vt,{VLayout:y["a"]});var qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",{staticClass:"display-2 font-weight-bold mt-8 mb-6"},[t._v(" Sua Carteira de Ações ")]),a("alert-unsaved-changes"),a("alert-market-is-closed"),a("v-layout",{staticClass:"pt-10",attrs:{row:"",wrap:""}},t._l(t.stocks,(function(t){return a("StockCard",{key:t.id,attrs:{stock:t}})})),1)],1)},Ft=[],$t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-flex",{staticClass:"pr-5 pb-5",attrs:{xs12:"",md6:"",lg4:""}},[a("v-card",{staticClass:"green darken-3 white--text"},[a("v-card-title",{staticClass:"d-flex justify-space-between"},[a("h3",{staticClass:"order-2"},[t._v(t._s(t.stock.company))]),a("span",{staticClass:"order-1"},[t._v(t._s(t.stock.id))]),a("span",{staticClass:"order-3"},[t._v("$"+t._s(t._f("number")(t.stock.price,2))+" por ação")])])],1),a("v-card",[a("v-container",{attrs:{"fill-height":""}},[a("v-text-field",{attrs:{type:"number",label:"Quantidade",error:0!==t.quantity&&!t.canBuy},model:{value:t.quantity,callback:function(e){t.quantity=t._n(e)},expression:"quantity"}}),a("v-btn",{staticClass:"green darken-3 white--text",attrs:{disabled:!t.canBuy},on:{click:t.buyStock}},[t._v("Comprar")])],1)],1)],1)},It=[],At={data:function(){return{quantity:0}},computed:{availableFunds:function(){return this.$store.getters["portfolio/unappliedFunds"]},canBuy:function(){return this.quantity>0&&Number.isInteger(this.quantity)&&this.quantity*this.stock.price<=this.availableFunds}},props:{stock:{type:Object,required:!0}},methods:{buyStock:function(){var t={stockId:this.stock.id,stockPrice:this.stock.price,stockQuantity:this.quantity};this.$store.dispatch("buyStocks",t),this.quantity=0}}},Tt=At,Nt=Object(f["a"])(Tt,$t,It,!1,null,"f423e882",null),Et=Nt.exports;v()(Nt,{VBtn:h["a"],VCard:it["a"],VCardTitle:ct["c"],VContainer:D["a"],VFlex:lt["a"],VTextField:Ct["a"]});var Dt={components:{AlertMarketIsClosed:W,AlertUnsavedChanges:at,StockCard:Et},computed:Object(l["c"])("stocks",["stocks"])},Pt=Dt,Bt=Object(f["a"])(Pt,qt,Ft,!1,null,"04fe9201",null),Qt=Bt.exports;v()(Bt,{VLayout:y["a"]}),n["a"].use(L["a"]);var Lt=new L["a"]({mode:"hash",routes:[{path:"/",name:"home",component:mt},{path:"/portfolio",name:"portfolio",component:wt},{path:"/stocks",name:"stocks",component:Qt},{path:"*",redirect:"/"}]}),Mt=(a("99af"),a("4160"),a("d81d"),a("b64b"),a("159b"),a("2909")),Rt=(a("96cf"),a("1da1")),Jt=a("bc3a"),Ut=a.n(Jt),Ht="https://sheet.best/api/sheets/c762c72f-1f4b-43be-a11e-8482d0a4820c",Gt={namespaced:!0,state:{stocks:[]},getters:{stocks:function(t){return t.stocks}},mutations:{setStocks:function(t,e){t.stocks=e}},actions:{fetchStocks:function(t){return Object(Rt["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,e.next=3,Ut()(Ht,{transformResponse:[].concat(Object(Mt["a"])(Ut.a.defaults.transformResponse),[function(t){return t.map((function(t){return Object.keys(t).forEach((function(e){isNaN(t[e])||(t[e]=Number(t[e]))})),t}))}])});case 3:n=e.sent,a("setStocks",n.data);case 5:case"end":return e.stop()}}),e)})))()}}},zt=(a("7db0"),a("c975"),a("13d5"),a("a434"),{namespaced:!0,state:{funds:0,portfolio:[]},getters:{portfolioStocks:function(t,e,a,n){return t.portfolio.map((function(t){var e=n["stocks/stocks"].find((function(e){return e.id===t.id}));return Object(c["a"])({},e,{quantity:t.quantity})}))},appliedFunds:function(t,e){return e.portfolioStocks.reduce((function(t,e){return t+e.price*e.quantity}),0)},unappliedFunds:function(t){return t.funds},totalFunds:function(t,e){return e.appliedFunds+e.unappliedFunds}},mutations:{setData:function(t,e){t.funds=e.funds,t.portfolio=e.portfolio},buyStocks:function(t,e){var a=t.portfolio.find((function(t){return t.id===e.stockId}));a?a.quantity+=e.stockQuantity:t.portfolio.push({id:e.stockId,quantity:e.stockQuantity}),t.funds-=e.stockQuantity*e.stockPrice},sellStocks:function(t,e){var a=t.portfolio.find((function(t){return t.id===e.stockId}));a.quantity>e.stockQuantity?a.quantity-=e.stockQuantity:t.portfolio.splice(t.portfolio.indexOf(a),1),t.funds+=e.stockQuantity*e.stockPrice}},actions:{resetData:function(t){var e=t.commit,a=t.state;e("setData",{funds:1e4,portfolio:[]}),e("storage/stageChanges",a,{root:!0}),e("storage/commitChanges",null,{root:!0})},buyStocks:{root:!0,handler:function(t,e){var a=t.commit,n=(t.dispatch,t.state);a("buyStocks",e),a("storage/stageChanges",n,{root:!0})}},sellStocks:{root:!0,handler:function(t,e){var a=t.commit,n=(t.dispatch,t.state);a("sellStocks",e),a("storage/stageChanges",n,{root:!0})}}}}),Kt="my_data",Wt={namespaced:!0,state:{persitant:{},temporary:{}},getters:{hasChanges:function(t){var e=JSON.stringify(t.persitant),a=JSON.stringify(t.temporary);return a!==e}},mutations:{setStorages:function(t,e){var a=e.local,n=e.session;n&&(t.temporary=n),a&&(t.persitant=a)},stageChanges:function(t,e){t.temporary=e,sessionStorage.setItem(Kt,JSON.stringify(e))},commitChanges:function(t){t.persitant=Object(c["a"])({},t.temporary),localStorage.setItem(Kt,sessionStorage.getItem(Kt))}},actions:{restoreData:function(t){var e=t.commit,a=t.dispatch,n=JSON.parse(localStorage.getItem(Kt)),s=JSON.parse(sessionStorage.getItem(Kt))||n;s?(e("portfolio/setData",s,{root:!0}),e("setStorages",{local:n,session:s})):a("portfolio/resetData",null,{root:!0})},discardChanges:function(t){var e=t.commit,a=t.state,n=a.persitant;e("stageChanges",n),e("portfolio/setData",n,{root:!0})}}};n["a"].use(l["a"]);var Xt=new l["a"].Store({modules:{stocks:Gt,portfolio:zt,storage:Wt}}),Yt=a("f309");n["a"].use(Yt["a"]);var Zt=new Yt["a"]({});a("8975");n["a"].config.productionTip=!1,new n["a"]({router:Lt,store:Xt,vuetify:Zt,render:function(t){return t(Q)}}).$mount("#app")},7690:function(t,e,a){var n={"./index.js":"8975","./number.js":"f1f7"};function s(t){var e=r(t);return a(e)}function r(t){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}s.keys=function(){return Object.keys(n)},s.resolve=r,t.exports=s,s.id="7690"},8975:function(t,e,a){"use strict";a.r(e);a("4de4"),a("4160"),a("d3b7"),a("ac1f"),a("5319"),a("159b"),a("ddb0");var n=a("2b0e"),s=a("7690");s.keys().forEach((function(t){if("./index.js"!==t){var e=s(t).default,a=t.replace(/^\.\//,"").replace(/\.js$/,"");n["a"].filter(a,e)}}))},"8a23":function(t,e,a){},"9f4e":function(t,e,a){},b89b:function(t,e,a){"use strict";var n=a("9f4e"),s=a.n(n);s.a},f1f7:function(t,e,a){"use strict";a.r(e),e["default"]=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return isNaN(t)?t:Intl.NumberFormat("pt-BR",{maximumFractionDigits:e,minimumFractionDigits:e}).format(t)}},f5fa:function(t,e,a){}});
//# sourceMappingURL=app.69a97b55.js.map